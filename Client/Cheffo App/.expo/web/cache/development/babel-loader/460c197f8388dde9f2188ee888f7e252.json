{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\User\\\\Documents\\\\GitHub\\\\reactHomeals\\\\src\\\\UserContext.js\";\nimport fire from \"../fire\";\nimport { auth } from 'firebase';\nimport React, { useContext, useState, useEffect } from 'react';\nimport dbFirestore from \"../fire\";\nimport { getDistanceFromLatLonInKm } from \"../helpers/calcDis\";\nvar apiURLgetUser = \"http://192.168.1.35:50247/api/User/getUser/\";\nvar apiURLpostUser = \"http://192.168.1.35:50247/api/User/postUser/\";\nvar apiURLgetChefs = \"http://192.168.1.35:50247/api/Chef/getChefs/\";\nvar apiURLgetDishes = \"http://192.168.1.35:50247/api/Dish/getDishes/\";\nvar apiURLpostOrder = \"http://192.168.1.35:50247/api/Order/postOrder/\";\nvar apiURLgetOrder = \"http://192.168.1.35:50247/api/Order/getOrder/\";\nvar apiURLgetConnections = \"http://192.168.1.35:50247/api/Connection/getConnections/\";\nvar apiURLgetReviews = \"http://192.168.1.35:50247/api/Review/getReviews/\";\nvar UserContext = React.createContext();\nvar UserUpdateContext = React.createContext();\nexport function useUserContext() {\n  return useContext(UserContext);\n}\nexport function useUserUpdateContext() {\n  return useContext(UserUpdateContext);\n}\nexport function UserProvider(_ref) {\n  var children = _ref.children;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      currentUser = _useState2[0],\n      setCurrentUser = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      currentChef = _useState4[0],\n      setCurrentChef = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      currentChefDishes = _useState6[0],\n      setCurrentChefDishes = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      chefsArr = _useState8[0],\n      setChefsArr = _useState8[1];\n\n  var _useState9 = useState(''),\n      _useState10 = _slicedToArray(_useState9, 2),\n      friendsArr = _useState10[0],\n      setFriendsArr = _useState10[1];\n\n  var _useState11 = useState(''),\n      _useState12 = _slicedToArray(_useState11, 2),\n      reviewsArr = _useState12[0],\n      setReviewsArr = _useState12[1];\n\n  var _useState13 = useState({\n    value: '',\n    error: ''\n  }),\n      _useState14 = _slicedToArray(_useState13, 2),\n      name = _useState14[0],\n      setName = _useState14[1];\n\n  var _useState15 = useState({\n    value: '',\n    error: ''\n  }),\n      _useState16 = _slicedToArray(_useState15, 2),\n      email = _useState16[0],\n      setEmail = _useState16[1];\n\n  var _useState17 = useState({\n    value: '',\n    error: ''\n  }),\n      _useState18 = _slicedToArray(_useState17, 2),\n      password = _useState18[0],\n      setPassword = _useState18[1];\n\n  var _useState19 = useState(''),\n      _useState20 = _slicedToArray(_useState19, 2),\n      userID = _useState20[0],\n      setUserID = _useState20[1];\n\n  var _useState21 = useState(''),\n      _useState22 = _slicedToArray(_useState21, 2),\n      selectedImage = _useState22[0],\n      setSelectedImage = _useState22[1];\n\n  var _useState23 = useState([]),\n      _useState24 = _slicedToArray(_useState23, 2),\n      cart = _useState24[0],\n      setCart = _useState24[1];\n\n  var _useState25 = useState(26),\n      _useState26 = _slicedToArray(_useState25, 2),\n      sliderValue = _useState26[0],\n      setSliderValue = _useState26[1];\n\n  var _useState27 = useState([]),\n      _useState28 = _slicedToArray(_useState27, 2),\n      orders = _useState28[0],\n      setOrders = _useState28[1];\n\n  var _useState29 = useState(''),\n      _useState30 = _slicedToArray(_useState29, 2),\n      friendsInDepth = _useState30[0],\n      setFriendsInDepth = _useState30[1];\n\n  function fireStoreImg() {\n    dbFirestore.firestore().collection('userData').doc(currentUser.uid).set({\n      imgUrl: currentUser.img\n    }).then(function () {\n      console.log('User added!');\n    });\n  }\n\n  function getFireStoreImg() {\n    var temp, userImg;\n    return _regeneratorRuntime.async(function getFireStoreImg$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            temp = currentUser;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(dbFirestore.firestore().collection('userData').get());\n\n          case 3:\n            userImg = _context.sent;\n            console.log(userImg);\n            userImg.wP.docChanges.forEach(function (element) {\n              if (currentUser.uid == element.doc.key.path.segments[6]) temp.img = element.doc.proto.fields.imgUrl.stringValue;\n            });\n            console.log(temp);\n            setCurrentUser(temp);\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function cartTotal(name, price, quantity) {\n    var tempCart;\n    var tempDish = {\n      Name: name,\n      Price: price,\n      Quantity: quantity\n    };\n    var flag = false;\n\n    if (cart) {\n      cart.map(function (item, key) {\n        if (item.Name == name) {\n          item.Quantity = quantity;\n          flag = true;\n          tempCart = cart;\n        }\n      });\n    } else {\n      setCart([tempDish]);\n      return;\n    }\n\n    if (!flag) {\n      tempCart = cart;\n      tempCart.push(tempDish);\n    }\n\n    setCart(tempCart);\n    console.log(cart);\n    console.log(tempDish);\n  }\n\n  function getOrders() {\n    fetch(apiURLgetOrder + currentUser.uid, {\n      method: 'GET',\n      headers: new Headers({\n        'Content-Type': 'application/json; charset=UTF-8',\n        'Accept': 'application/json; charset=UTF-8'\n      })\n    }).then(function (response) {\n      console.log('response.status', response.status);\n      return response.json();\n    }).then(function (data) {\n      setOrders(data);\n    }, function (error) {\n      console.log(\"err get=\", error);\n    });\n  }\n\n  function setOrder() {\n    var sum = 0;\n    var orderStr = '';\n    cart.forEach(function (element) {\n      if (element.Quantity != 0) {\n        sum += element.Quantity * element.Price;\n        orderStr += element.Quantity + 'x ' + element.Name + ' - ' + element.Quantity * element.Price + '; ';\n      }\n    });\n    var currentdate = new Date();\n    var datetime = currentdate.getDate() + \"/\" + (currentdate.getMonth() + 1) + \"/\" + currentdate.getFullYear() + \" - \" + currentdate.getHours() + \":\" + currentdate.getMinutes();\n    var newOrder = {\n      uid: currentUser.uid,\n      chefEmail: currentChef.Email,\n      orderTime: datetime,\n      orderDescription: orderStr,\n      totalPrice: sum,\n      chef: currentChef.DisplayName\n    };\n    fetch(apiURLpostOrder, {\n      method: 'POST',\n      body: JSON.stringify(newOrder),\n      headers: new Headers({\n        'Content-Type': 'application/json; charset=UTF-8',\n        'Accept': 'application/json; charset=UTF-8'\n      })\n    }).then(function (response) {\n      console.log('response=', response);\n      console.log('response.status', response.status);\n      console.log('response.ok', response.ok);\n      return response.json();\n    });\n    setCart([]);\n  }\n\n  function onLogin(email, userID) {\n    setEmail(email);\n    setUserID(userID);\n  }\n\n  function updateImage(img) {\n    currentUser.img = img;\n  }\n\n  function updateEmail(email) {\n    return currentUser.updateEmail(email);\n  }\n\n  function updatePassword(password) {\n    return currentUser.updatePassword(password);\n  }\n\n  function signup(firstName, lastName, city, phone, email, password, lon, lat) {\n    var flag;\n    return _regeneratorRuntime.async(function signup$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            flag = true;\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(fire.auth().createUserWithEmailAndPassword(email, password).then(function (user) {\n              console.log(user.user.uid + \" / \" + email + \" / \" + firstName + \" / \" + lastName + \" / \" + city + \" / \" + phone);\n              var newUser = {\n                uid: user.user.uid,\n                email: email,\n                firstName: firstName,\n                lastName: lastName,\n                city: city,\n                pNumber: phone,\n                lon: lon,\n                lat: lat\n              };\n              console.log(newUser);\n              fetch(apiURLpostUser, {\n                method: 'POST',\n                body: JSON.stringify(newUser),\n                headers: new Headers({\n                  'Content-Type': 'application/json; charset=UTF-8',\n                  'Accept': 'application/json; charset=UTF-8'\n                })\n              }).then(function (response) {\n                console.log('response=', response);\n                console.log('response.status', response.status);\n                console.log('response.ok', response.ok);\n                return response.json();\n              });\n            }).catch(function (err) {\n              switch (err.code) {\n                case \"auth/email-already-in-use\":\n                case \"auth/invalid-email\":\n                case \"auth/weak-password\":\n                  alert(err.message);\n                  flag = false;\n                  break;\n              }\n            }));\n\n          case 3:\n            return _context2.abrupt(\"return\", flag);\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  useEffect(function () {\n    getChefs();\n  }, [currentUser]);\n\n  function selectedChef(email) {\n    return _regeneratorRuntime.async(function selectedChef$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return _regeneratorRuntime.awrap(getDishes(email));\n\n          case 2:\n            _context3.next = 4;\n            return _regeneratorRuntime.awrap(chefsArr.forEach(function (element) {\n              if (element.Email == email) {\n                setCurrentChef(element);\n              }\n            }));\n\n          case 4:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function getDishes(email) {\n    fetch(apiURLgetDishes + email + '/', {\n      method: 'GET',\n      headers: new Headers({\n        'Content-Type': 'application/json; charset=UTF-8',\n        'Accept': 'application/json; charset=UTF-8'\n      })\n    }).then(function (response) {\n      console.log('response.status', response.status);\n      return response.json();\n    }).then(function (data) {\n      setCurrentChefDishes(data);\n    }, function (error) {\n      console.log(\"err get=\", error);\n    });\n  }\n\n  function getChefs() {\n    fetch(apiURLgetChefs, {\n      method: 'GET',\n      headers: new Headers({\n        'Content-Type': 'application/json; charset=UTF-8',\n        'Accept': 'application/json; charset=UTF-8'\n      })\n    }).then(function (response) {\n      console.log('response.status', response.status);\n      return response.json();\n    }).then(function (data) {\n      var tempChefs = [];\n      data.forEach(function (element) {\n        var chef = {\n          Address: element.Address,\n          DisplayName: element.DisplayName,\n          Email: element.Email,\n          FirstName: element.FirstName,\n          LastName: element.LastName,\n          PNumber: element.PNumber,\n          Lon: element.Lon,\n          Lat: element.Lat,\n          Rating: element.Rating,\n          FoodType: element.FoodType,\n          Img: element.Img,\n          DisFromUser: getDistanceFromLatLonInKm(currentUser.lat, currentUser.lon, element.Lat, element.Lon)\n        };\n        tempChefs.push(chef);\n      });\n      setChefsArr(tempChefs);\n    }, function (error) {\n      console.log(\"err get=\", error);\n    });\n    getFireStoreImg();\n  }\n\n  function getConnections(sourceUid) {\n    var tempConnections;\n    return _regeneratorRuntime.async(function getConnections$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            tempConnections = [];\n            _context4.next = 3;\n            return _regeneratorRuntime.awrap(fetch(apiURLgetConnections + sourceUid, {\n              method: 'GET',\n              headers: new Headers({\n                'Content-Type': 'application/json; charset=UTF-8',\n                'Accept': 'application/json; charset=UTF-8'\n              })\n            }).then(function (response) {\n              console.log('response.status', response.status);\n              return response.json();\n            }).then(function (data) {\n              data.forEach(function (element) {\n                var Connection = {\n                  TargetUid: element.TargetUid\n                };\n                tempConnections.push(Connection);\n              });\n            }, function (error) {\n              console.log(\"err get=\", error);\n            }));\n\n          case 3:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  useEffect(function () {\n    if (friendsArr) {\n      friendsArr.forEach(function (currFriend) {\n        getReviews(currFriend);\n      });\n    }\n  }, [friendsArr]);\n\n  function getFriendsInDepth(depth) {\n    var currentDepth = [];\n    friendsArr.forEach(function (currUser) {\n      currentDepth.push(currUser);\n    });\n\n    while (depth > 0) {\n      depth--;\n    }\n  }\n\n  var tempReviews = [];\n\n  function getReviews(friendsUid) {\n    return _regeneratorRuntime.async(function getReviews$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.next = 2;\n            return _regeneratorRuntime.awrap(fetch(apiURLgetReviews + friendsUid.TargetUid, {\n              method: 'GET',\n              headers: new Headers({\n                'Content-Type': 'application/json; charset=UTF-8',\n                'Accept': 'application/json; charset=UTF-8'\n              })\n            }).then(function (response) {\n              console.log('response.status', response.status);\n              return response.json();\n            }).then(function (data) {\n              data.forEach(function (element) {\n                tempReviews.push(element);\n              });\n            }, function (error) {\n              console.log(\"err get=\", error);\n            }));\n\n          case 2:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function signin(email, password, callbackfunc) {\n    var flag;\n    return _regeneratorRuntime.async(function signin$(_context9) {\n      while (1) {\n        switch (_context9.prev = _context9.next) {\n          case 0:\n            _context9.next = 2;\n            return _regeneratorRuntime.awrap(fire.auth().signInWithEmailAndPassword(email, password).then(function _callee3() {\n              return _regeneratorRuntime.async(function _callee3$(_context8) {\n                while (1) {\n                  switch (_context8.prev = _context8.next) {\n                    case 0:\n                      _context8.next = 2;\n                      return _regeneratorRuntime.awrap(fire.auth().onAuthStateChanged(function _callee2(authUser) {\n                        return _regeneratorRuntime.async(function _callee2$(_context7) {\n                          while (1) {\n                            switch (_context7.prev = _context7.next) {\n                              case 0:\n                                if (!(authUser !== null)) {\n                                  _context7.next = 5;\n                                  break;\n                                }\n\n                                _context7.next = 3;\n                                return _regeneratorRuntime.awrap(fetch(apiURLgetUser + authUser.uid, {\n                                  method: 'GET',\n                                  headers: new Headers({\n                                    'Content-Type': 'application/json; charset=UTF-8',\n                                    'Accept': 'application/json; charset=UTF-8'\n                                  })\n                                }).then(function (response) {\n                                  console.log('response.status', response.status);\n                                  return response.json();\n                                }).then(function _callee(data) {\n                                  var user;\n                                  return _regeneratorRuntime.async(function _callee$(_context6) {\n                                    while (1) {\n                                      switch (_context6.prev = _context6.next) {\n                                        case 0:\n                                          user = {\n                                            uid: data.Uid,\n                                            email: data.Email,\n                                            firstName: data.FirstName,\n                                            lastName: data.LastName,\n                                            city: data.City,\n                                            pNumber: data.PNumber,\n                                            lon: data.Lon,\n                                            lat: data.Lat,\n                                            img: data.Img\n                                          };\n                                          setCurrentUser(user);\n                                          console.log(user);\n                                          flag = true;\n                                          callbackfunc(flag);\n\n                                        case 5:\n                                        case \"end\":\n                                          return _context6.stop();\n                                      }\n                                    }\n                                  }, null, null, null, Promise);\n                                }, function (error) {\n                                  console.log(\"err get=\", error);\n                                }));\n\n                              case 3:\n                                _context7.next = 6;\n                                break;\n\n                              case 5:\n                                setCurrentUser('');\n\n                              case 6:\n                              case \"end\":\n                                return _context7.stop();\n                            }\n                          }\n                        }, null, null, null, Promise);\n                      }));\n\n                    case 2:\n                    case \"end\":\n                      return _context8.stop();\n                  }\n                }\n              }, null, null, null, Promise);\n            }).catch(function (err) {\n              switch (err.code) {\n                case \"auth/invalid-email\":\n                case \"auth/user-disabled\":\n                case \"auth/user-not-found\":\n                  alert(\"wrong Email\");\n                  console.log(err.message);\n                  break;\n\n                case \"auth/wrong-password\":\n                  alert(\"wrong Password\");\n                  console.log(err.message);\n                  break;\n              }\n\n              flag = false;\n              callbackfunc(flag);\n            }));\n\n          case 2:\n          case \"end\":\n            return _context9.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function Logout() {\n    fire.auth().signOut();\n    clearUserContext();\n  }\n\n  function clearUserContext() {\n    setCurrentUser('');\n    setCurrentChef('');\n    setCurrentChefDishes(null);\n    setChefsArr('');\n    setFriendsArr(null);\n    setReviewsArr('');\n    setName('');\n    setEmail('');\n    setPassword('');\n    setUserID('');\n    setSelectedImage('');\n    setCart([]);\n    setOrders([]);\n  }\n\n  var value = {\n    currentUser: currentUser,\n    setCurrentUser: setCurrentUser,\n    name: name,\n    email: email,\n    password: password,\n    userID: userID,\n    signup: signup,\n    signin: signin,\n    updateEmail: updateEmail,\n    updatePassword: updatePassword,\n    onLogin: onLogin,\n    Logout: Logout,\n    chefsArr: chefsArr,\n    selectedChef: selectedChef,\n    currentChefDishes: currentChefDishes,\n    setCurrentChefDishes: setCurrentChefDishes,\n    currentChef: currentChef,\n    updateImage: updateImage,\n    cartTotal: cartTotal,\n    cart: cart,\n    setCart: setCart,\n    sliderValue: sliderValue,\n    setSliderValue: setSliderValue,\n    setOrder: setOrder,\n    getOrders: getOrders,\n    orders: orders,\n    fireStoreImg: fireStoreImg,\n    getFireStoreImg: getFireStoreImg,\n    getConnections: getConnections,\n    friendsArr: friendsArr,\n    setFriendsArr: setFriendsArr,\n    friendsInDepth: friendsInDepth,\n    setFriendsInDepth: setFriendsInDepth\n  };\n  return React.createElement(UserContext.Provider, {\n    value: value,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 537,\n      columnNumber: 9\n    }\n  }, children);\n}","map":{"version":3,"sources":["C:/Users/User/Documents/GitHub/reactHomeals/src/UserContext.js"],"names":["fire","auth","React","useContext","useState","useEffect","dbFirestore","getDistanceFromLatLonInKm","apiURLgetUser","apiURLpostUser","apiURLgetChefs","apiURLgetDishes","apiURLpostOrder","apiURLgetOrder","apiURLgetConnections","apiURLgetReviews","UserContext","createContext","UserUpdateContext","useUserContext","useUserUpdateContext","UserProvider","children","currentUser","setCurrentUser","currentChef","setCurrentChef","currentChefDishes","setCurrentChefDishes","chefsArr","setChefsArr","friendsArr","setFriendsArr","reviewsArr","setReviewsArr","value","error","name","setName","email","setEmail","password","setPassword","userID","setUserID","selectedImage","setSelectedImage","cart","setCart","sliderValue","setSliderValue","orders","setOrders","friendsInDepth","setFriendsInDepth","fireStoreImg","firestore","collection","doc","uid","set","imgUrl","img","then","console","log","getFireStoreImg","temp","get","userImg","wP","docChanges","forEach","element","key","path","segments","proto","fields","stringValue","cartTotal","price","quantity","tempCart","tempDish","Name","Price","Quantity","flag","map","item","push","getOrders","fetch","method","headers","Headers","response","status","json","data","setOrder","sum","orderStr","currentdate","Date","datetime","getDate","getMonth","getFullYear","getHours","getMinutes","newOrder","chefEmail","Email","orderTime","orderDescription","totalPrice","chef","DisplayName","body","JSON","stringify","ok","onLogin","updateImage","updateEmail","updatePassword","signup","firstName","lastName","city","phone","lon","lat","createUserWithEmailAndPassword","user","newUser","pNumber","catch","err","code","alert","message","getChefs","selectedChef","getDishes","tempChefs","Address","FirstName","LastName","PNumber","Lon","Lat","Rating","FoodType","Img","DisFromUser","getConnections","sourceUid","tempConnections","Connection","TargetUid","currFriend","getReviews","getFriendsInDepth","depth","currentDepth","currUser","tempReviews","friendsUid","signin","callbackfunc","signInWithEmailAndPassword","onAuthStateChanged","authUser","Uid","City","Logout","signOut","clearUserContext"],"mappings":"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","sourcesContent":["import fire from '../fire'\r\nimport { auth } from 'firebase'\r\nimport React, { useContext, useState, useEffect } from 'react'\r\nimport dbFirestore from '../fire'\r\nimport { getDistanceFromLatLonInKm } from '../helpers/calcDis'\r\n\r\nlet apiURLgetUser = \"http://192.168.1.35:50247/api/User/getUser/\"; // Asaf\r\nlet apiURLpostUser = \"http://192.168.1.35:50247/api/User/postUser/\";\r\nlet apiURLgetChefs = \"http://192.168.1.35:50247/api/Chef/getChefs/\";\r\nlet apiURLgetDishes = \"http://192.168.1.35:50247/api/Dish/getDishes/\";\r\nlet apiURLpostOrder = \"http://192.168.1.35:50247/api/Order/postOrder/\";\r\nlet apiURLgetOrder = \"http://192.168.1.35:50247/api/Order/getOrder/\";\r\nlet apiURLgetConnections = \"http://192.168.1.35:50247/api/Connection/getConnections/\";\r\nlet apiURLgetReviews = \"http://192.168.1.35:50247/api/Review/getReviews/\";\r\n\r\n/* let apiURLgetUser = \"http://192.168.31.156:50247/api/User/getUser/\"; // Shachar\r\nlet apiURLpostUser = \"http://192.168.31.156:50247/api/User/postUser/\";\r\nlet apiURLgetChefs = \"http://192.168.31.156:50247/api/Chef/getChefs/\";\r\nlet apiURLgetDishes = \"http://192.168.31.156:50247/api/Dish/getDishes/\";\r\nlet apiURLpostOrder = \"http://192.168.31.156:50247/api/Order/postOrder/\";\r\nlet apiURLgetOrder = \"http://192.168.31.156:50247/api/Order/getOrder/\";\r\nlet apiURLgetConnections = \"http://192.168.31.156:50247/api/Connection/getConnections/\";\r\nlet apiURLgetReviews = \"http://192.168.31.156:50247/api/Review/getReviews/\"; */\r\n\r\n/* let apiURLgetUser = \"http://192.168.5.111:50247/api/User/getUser/\"; // Sasson\r\nlet apiURLpostUser = \"http://192.168.5.111:50247/api/User/postUser/\";\r\nlet apiURLgetChefs = \"http://192.168.5.111:50247/api/Chef/getChefs/\";\r\nlet apiURLgetDishes = \"http://192.168.5.111:50247/api/Dish/getDishes/\";\r\nlet apiURLpostOrder = \"http://192.168.5.111:50247/api/Order/postOrder/\";\r\nlet apiURLgetOrder = \"http://192.168.5.111:50247/api/Order/getOrder/\";\r\nlet apiURLgetConnections = \"http://192.168.5.111:50247/api/Connection/getConnections/\";\r\nlet apiURLgetReviews = \"http://192.168.5.111:50247/api/Review/getReviews/\"; */\r\n\r\n\r\n\r\nconst UserContext = React.createContext()\r\nconst UserUpdateContext = React.createContext()\r\n\r\n\r\n\r\nexport function useUserContext() {\r\n    return useContext(UserContext)\r\n}\r\n\r\nexport function useUserUpdateContext() {\r\n    return useContext(UserUpdateContext)\r\n}\r\n\r\nexport function UserProvider({ children }) {\r\n    const [currentUser, setCurrentUser] = useState('')\r\n    const [currentChef, setCurrentChef] = useState('')\r\n    const [currentChefDishes, setCurrentChefDishes] = useState('')\r\n    const [chefsArr, setChefsArr] = useState('')\r\n    const [friendsArr, setFriendsArr] = useState('')\r\n    const [reviewsArr, setReviewsArr] = useState('')\r\n    const [name, setName] = useState({ value: '', error: '' })\r\n    const [email, setEmail] = useState({ value: '', error: '' })\r\n    const [password, setPassword] = useState({ value: '', error: '' })\r\n    const [userID, setUserID] = useState('')\r\n    const [selectedImage, setSelectedImage] = useState('');\r\n    const [cart, setCart] = useState([]);\r\n    const [sliderValue, setSliderValue] = useState(26);\r\n    const [orders, setOrders] = useState([]);\r\n    const [friendsInDepth, setFriendsInDepth] = useState('')\r\n\r\n\r\n    function fireStoreImg() {\r\n        dbFirestore.firestore()\r\n            .collection('userData')\r\n            .doc(currentUser.uid)\r\n            .set({\r\n                imgUrl: currentUser.img\r\n            })\r\n            .then(() => {\r\n                console.log('User added!');\r\n            });\r\n\r\n    }\r\n\r\n    async function getFireStoreImg() {\r\n        let temp = currentUser;\r\n\r\n        const userImg = await dbFirestore.firestore()\r\n            .collection('userData')\r\n            .get();\r\n        console.log(userImg)\r\n        userImg.wP.docChanges.forEach(element => {\r\n            if (currentUser.uid == element.doc.key.path.segments[6])\r\n                temp.img = element.doc.proto.fields.imgUrl.stringValue;\r\n        });\r\n        console.log(temp)\r\n        setCurrentUser(temp)\r\n\r\n\r\n        /*   console.log(userImg) */\r\n\r\n        /* console.log(userImg.cP.qe.Zt.root.value.Zt); */\r\n        /* temp.img = userImg.cP.qe.Zt.root.value.Zt; */\r\n        /*  setCurrentUser(temp);\r\n         console.log(currentUser) */\r\n    }\r\n\r\n    function cartTotal(name, price, quantity) {\r\n        let tempCart;\r\n        let tempDish = {\r\n            Name: name,\r\n            Price: price,\r\n            Quantity: quantity\r\n        }\r\n        let flag = false;\r\n        if (cart) {\r\n            cart.map((item, key) => {\r\n                if (item.Name == name) {\r\n                    item.Quantity = quantity;\r\n                    flag = true;\r\n                    tempCart = cart;\r\n                }\r\n            }\r\n            )\r\n        }\r\n        else {\r\n            setCart([tempDish]);\r\n            return;\r\n        }\r\n        if (!flag) {\r\n            tempCart = cart;\r\n            tempCart.push(tempDish);\r\n        }\r\n        setCart(tempCart);\r\n        console.log(cart);\r\n        console.log(tempDish);\r\n    }\r\n\r\n    function getOrders() {\r\n        /* Get Orders from SQL */\r\n        fetch(apiURLgetOrder + currentUser.uid, {\r\n            method: 'GET',\r\n            headers: new Headers({\r\n                'Content-Type': 'application/json; charset=UTF-8',\r\n                'Accept': 'application/json; charset=UTF-8'\r\n            })\r\n        })\r\n            .then(response => {\r\n                console.log('response.status', response.status);\r\n                return response.json();\r\n            })\r\n            .then((data) => {\r\n                setOrders(data);\r\n            },\r\n                (error) => {\r\n                    console.log(\"err get=\", error);\r\n                });\r\n\r\n    }\r\n\r\n    function setOrder() {\r\n        let sum = 0;\r\n        let orderStr = '';\r\n        cart.forEach(element => {\r\n            if (element.Quantity != 0) {\r\n                sum += (element.Quantity * element.Price)\r\n                orderStr += element.Quantity + 'x ' + element.Name + ' - ' + (element.Quantity * element.Price) + '; ';\r\n            }\r\n        });\r\n        var currentdate = new Date();\r\n        var datetime = currentdate.getDate() + \"/\"\r\n            + (currentdate.getMonth() + 1) + \"/\"\r\n            + currentdate.getFullYear() + \" - \"\r\n            + currentdate.getHours() + \":\"\r\n            + currentdate.getMinutes();\r\n        let newOrder = {\r\n            uid: currentUser.uid,\r\n            chefEmail: currentChef.Email,\r\n            orderTime: datetime,\r\n            orderDescription: orderStr,\r\n            totalPrice: sum,\r\n            chef: currentChef.DisplayName\r\n        }\r\n        fetch(apiURLpostOrder, {\r\n            method: 'POST',\r\n            body: JSON.stringify(newOrder),\r\n            headers: new Headers({\r\n                'Content-Type': 'application/json; charset=UTF-8',\r\n                'Accept': 'application/json; charset=UTF-8'\r\n            })\r\n        })\r\n            .then(response => {\r\n                console.log('response=', response);\r\n                console.log('response.status', response.status);\r\n                console.log('response.ok', response.ok);\r\n                return response.json();\r\n            })\r\n        setCart([]);\r\n    }\r\n\r\n    function onLogin(email, userID) {\r\n        setEmail(email);\r\n        setUserID(userID);\r\n\r\n    }\r\n\r\n    function updateImage(img) {\r\n        currentUser.img = img;\r\n    }\r\n\r\n    function updateEmail(email) {\r\n        return currentUser.updateEmail(email)\r\n    }\r\n\r\n    function updatePassword(password) {\r\n        return currentUser.updatePassword(password)\r\n    }\r\n\r\n    async function signup(firstName, lastName, city, phone, email, password, lon, lat) {\r\n        var flag = true;\r\n        await fire\r\n            .auth()\r\n            .createUserWithEmailAndPassword(email, password)\r\n            .then(function (user) {\r\n                console.log(user.user.uid + \" / \" + email + \" / \" + firstName + \" / \" + lastName + \" / \" + city + \" / \" + phone)\r\n                const newUser = {\r\n                    uid: user.user.uid,\r\n                    email: email,\r\n                    firstName: firstName,\r\n                    lastName: lastName,\r\n                    city: city,\r\n                    pNumber: phone,\r\n                    lon: lon,\r\n                    lat: lat\r\n                }\r\n                console.log(newUser);\r\n                fetch(apiURLpostUser, {\r\n                    method: 'POST',\r\n                    body: JSON.stringify(newUser),\r\n                    headers: new Headers({\r\n                        'Content-Type': 'application/json; charset=UTF-8',\r\n                        'Accept': 'application/json; charset=UTF-8'\r\n                    })\r\n                })\r\n                    .then(response => {\r\n                        console.log('response=', response);\r\n                        console.log('response.status', response.status);\r\n                        console.log('response.ok', response.ok);\r\n                        return response.json();\r\n                    })\r\n            })\r\n            .catch(err => {\r\n                switch (err.code) {\r\n                    case \"auth/email-already-in-use\":\r\n                    case \"auth/invalid-email\":\r\n                    case \"auth/weak-password\":\r\n                        alert(err.message);\r\n                        flag = false;\r\n                        break;\r\n                }\r\n            });\r\n\r\n\r\n        return flag;\r\n    }\r\n\r\n    useEffect(() => {\r\n        getChefs();\r\n    }, [currentUser])\r\n\r\n\r\n\r\n    async function selectedChef(email) {\r\n        await getDishes(email);\r\n        await chefsArr.forEach(element => {\r\n            if (element.Email == email) {\r\n                setCurrentChef(element);\r\n            }\r\n        });\r\n    }\r\n\r\n    function getDishes(email) {\r\n        /* Get Dishes from SQL */\r\n        fetch(apiURLgetDishes + email + '/', {\r\n            method: 'GET',\r\n            headers: new Headers({\r\n                'Content-Type': 'application/json; charset=UTF-8',\r\n                'Accept': 'application/json; charset=UTF-8'\r\n            })\r\n        })\r\n            .then(response => {\r\n                console.log('response.status', response.status);\r\n                return response.json();\r\n            })\r\n            .then((data) => {\r\n                setCurrentChefDishes(data);\r\n            },\r\n                (error) => {\r\n                    console.log(\"err get=\", error);\r\n                });\r\n    }\r\n\r\n    function getChefs() {\r\n\r\n        /* Get Chefs from SQL */\r\n        fetch(apiURLgetChefs, {\r\n            method: 'GET',\r\n            headers: new Headers({\r\n                'Content-Type': 'application/json; charset=UTF-8',\r\n                'Accept': 'application/json; charset=UTF-8'\r\n            })\r\n        })\r\n            .then(response => {\r\n                console.log('response.status', response.status);\r\n                return response.json();\r\n            })\r\n            .then((data) => {\r\n                let tempChefs = [];\r\n                data.forEach(element => {\r\n                    const chef = {\r\n                        Address: element.Address,\r\n                        DisplayName: element.DisplayName,\r\n                        Email: element.Email,\r\n                        FirstName: element.FirstName,\r\n                        LastName: element.LastName,\r\n                        PNumber: element.PNumber,\r\n                        Lon: element.Lon,\r\n                        Lat: element.Lat,\r\n                        Rating: element.Rating,\r\n                        FoodType: element.FoodType,\r\n                        Img: element.Img,\r\n                        DisFromUser: getDistanceFromLatLonInKm(currentUser.lat, currentUser.lon, element.Lat, element.Lon)\r\n                    }\r\n                    tempChefs.push(chef);\r\n                });\r\n                setChefsArr(tempChefs);\r\n\r\n            },\r\n                (error) => {\r\n                    console.log(\"err get=\", error);\r\n                });\r\n        getFireStoreImg()\r\n    }\r\n\r\n    async function getConnections(sourceUid) {\r\n        /* Get Connections from SQL */\r\n        let tempConnections = [];\r\n        await fetch(apiURLgetConnections + sourceUid, {\r\n            method: 'GET',\r\n            headers: new Headers({\r\n                'Content-Type': 'application/json; charset=UTF-8',\r\n                'Accept': 'application/json; charset=UTF-8'\r\n            })\r\n        })\r\n            .then(response => {\r\n                console.log('response.status', response.status);\r\n                return response.json();\r\n            })\r\n            .then((data) => {\r\n\r\n                data.forEach(element => {\r\n                    const Connection = {\r\n                        TargetUid: element.TargetUid,\r\n                    }\r\n                    tempConnections.push(Connection);\r\n                });\r\n            },\r\n                (error) => {\r\n                    console.log(\"err get=\", error);\r\n                })\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(friendsArr){\r\n            friendsArr.forEach(currFriend => {\r\n                getReviews(currFriend)\r\n            })\r\n\r\n        }\r\n    }, [friendsArr])\r\n\r\n    function getFriendsInDepth(depth){\r\n        let currentDepth = [];\r\n        friendsArr.forEach(currUser => {\r\n            currentDepth.push(currUser);\r\n        })\r\n        while(depth > 0){\r\n\r\n            \r\n            depth--;\r\n        }\r\n    }\r\n\r\n    let tempReviews = [];\r\n    async function getReviews(friendsUid) {\r\n        await fetch(apiURLgetReviews + friendsUid.TargetUid, {\r\n            method: 'GET',\r\n            headers: new Headers({\r\n                'Content-Type': 'application/json; charset=UTF-8',\r\n                'Accept': 'application/json; charset=UTF-8'\r\n            })\r\n        })\r\n            .then(response => {\r\n                console.log('response.status', response.status);\r\n                return response.json();\r\n            })\r\n            .then((data) => {\r\n                data.forEach(element => {\r\n                    tempReviews.push(element)\r\n                });\r\n            },\r\n                (error) => {\r\n                    console.log(\"err get=\", error);\r\n                });\r\n/*         console.log(tempReviews); */\r\n    }\r\n\r\n    async function signin(email, password, callbackfunc) {\r\n        let flag;\r\n        await fire.auth()\r\n            .signInWithEmailAndPassword(email, password)\r\n            .then(async () => {\r\n                await fire.auth().onAuthStateChanged(async authUser => {\r\n                    if (authUser !== null) {\r\n                        /* Get User Details from SQL */\r\n                        await fetch(apiURLgetUser + authUser.uid, {\r\n                            method: 'GET',\r\n                            headers: new Headers({\r\n                                'Content-Type': 'application/json; charset=UTF-8',\r\n                                'Accept': 'application/json; charset=UTF-8'\r\n                            })\r\n                        })\r\n                            .then(response => {\r\n                                console.log('response.status', response.status);\r\n                                return response.json();\r\n                            })\r\n                            .then(async (data) => {\r\n                                const user = {\r\n                                    uid: data.Uid,\r\n                                    email: data.Email,\r\n                                    firstName: data.FirstName,\r\n                                    lastName: data.LastName,\r\n                                    city: data.City,\r\n                                    pNumber: data.PNumber,\r\n                                    lon: data.Lon,\r\n                                    lat: data.Lat,\r\n                                    img: data.Img\r\n                                }\r\n                                setCurrentUser(user);\r\n                                console.log(user)\r\n                                flag = true;\r\n                                callbackfunc(flag);\r\n                            },\r\n                                (error) => {\r\n                                    console.log(\"err get=\", error);\r\n\r\n                                })\r\n\r\n                    }\r\n                    else {\r\n                        setCurrentUser('');\r\n                    }\r\n                })\r\n            }\r\n            )\r\n            .catch(err => {\r\n                switch (err.code) {\r\n                    case \"auth/invalid-email\":\r\n                    case \"auth/user-disabled\":\r\n                    case \"auth/user-not-found\":\r\n                        alert(\"wrong Email\");\r\n                        console.log(err.message)\r\n                        break;\r\n                    case \"auth/wrong-password\":\r\n                        alert(\"wrong Password\");\r\n                        console.log(err.message)\r\n                        break;\r\n                }\r\n                flag = false;\r\n                callbackfunc(flag);\r\n            });\r\n    }\r\n\r\n    function Logout() {\r\n        fire.auth().signOut();\r\n        clearUserContext();\r\n    }\r\n\r\n    function clearUserContext() {\r\n        setCurrentUser('');\r\n        setCurrentChef('');\r\n        setCurrentChefDishes(null);\r\n        setChefsArr('');\r\n        setFriendsArr(null);\r\n        setReviewsArr('');\r\n        setName('');\r\n        setEmail('');\r\n        setPassword('');\r\n        setUserID('');\r\n        setSelectedImage('');\r\n        setCart([]);\r\n        setOrders([]);\r\n    }\r\n\r\n    const value = {\r\n        currentUser,\r\n        setCurrentUser,\r\n        name,\r\n        email,\r\n        password,\r\n        userID,\r\n        signup,\r\n        signin,\r\n        updateEmail,\r\n        updatePassword,\r\n        onLogin,\r\n        Logout,\r\n        chefsArr,\r\n        selectedChef,\r\n        currentChefDishes,\r\n        setCurrentChefDishes,\r\n        currentChef,\r\n        updateImage,\r\n        cartTotal,\r\n        cart,\r\n        setCart,\r\n        sliderValue,\r\n        setSliderValue,\r\n        setOrder,\r\n        getOrders,\r\n        orders,\r\n        fireStoreImg,\r\n        getFireStoreImg,\r\n        getConnections,\r\n        friendsArr,\r\n        setFriendsArr,\r\n        friendsInDepth,\r\n        setFriendsInDepth\r\n    }\r\n\r\n    return (\r\n        <UserContext.Provider value={value}>\r\n            {children}\r\n        </UserContext.Provider>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}