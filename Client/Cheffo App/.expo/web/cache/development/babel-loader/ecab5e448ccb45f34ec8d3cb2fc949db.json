{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\asafs\\\\Desktop\\\\homeals\\\\src\\\\UserContext.js\";\nimport fire from \"../fire\";\nimport { auth } from 'firebase';\nimport React, { useContext, useState, useEffect } from 'react';\nimport dbFirestore from \"../fire\";\nvar UserContext = React.createContext();\nvar UserUpdateContext = React.createContext();\nexport function useUserContext() {\n  return useContext(UserContext);\n}\nexport function useUserUpdateContext() {\n  return useContext(UserUpdateContext);\n}\nexport function UserProvider(_ref) {\n  var children = _ref.children;\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      currentUser = _useState2[0],\n      setCurrentUser = _useState2[1];\n\n  var _id$firstName$lastNam = {\n    id: '',\n    firstName: '',\n    lastName: '',\n    city: '',\n    phone: '',\n    email: ''\n  },\n      _id$firstName$lastNam2 = _slicedToArray(_id$firstName$lastNam, 2),\n      userInfo = _id$firstName$lastNam2[0],\n      setUserInfo = _id$firstName$lastNam2[1];\n\n  var _useState3 = useState({\n    value: '',\n    error: ''\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      name = _useState4[0],\n      setName = _useState4[1];\n\n  var _useState5 = useState({\n    value: '',\n    error: ''\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      email = _useState6[0],\n      setEmail = _useState6[1];\n\n  var _useState7 = useState({\n    value: '',\n    error: ''\n  }),\n      _useState8 = _slicedToArray(_useState7, 2),\n      password = _useState8[0],\n      setPassword = _useState8[1];\n\n  var _useState9 = useState(''),\n      _useState10 = _slicedToArray(_useState9, 2),\n      userID = _useState10[0],\n      setUserID = _useState10[1];\n\n  function onLogin(email, userID) {\n    setEmail(email);\n    setUserID(userID);\n  }\n\n  function updateEmail(email) {\n    return currentUser.updateEmail(email);\n  }\n\n  function updatePassword(password) {\n    return currentUser.updatePassword(password);\n  }\n\n  function signup(firstName, lastName, city, phone, email, password) {\n    var flag;\n    return _regeneratorRuntime.async(function signup$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            flag = true;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(fire.auth().createUserWithEmailAndPassword(email, password).catch(function (err) {\n              switch (err.code) {\n                case \"auth/email-already-in-use\":\n                case \"auth/invalid-email\":\n                case \"auth/weak-password\":\n                  alert(err.message);\n                  flag = false;\n                  break;\n              }\n            }));\n\n          case 3:\n            if (flag) {\n              setDbUser(currentUser.uid, firstName, lastName, city, phone, currentUser.email);\n            }\n\n            return _context.abrupt(\"return\", flag);\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function setDbUser(uid, firstName, lastName, city, phone, email) {\n    return _regeneratorRuntime.async(function setDbUser$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            setUserInfo({\n              uid: uid,\n              firstName: firstName,\n              lastName: lastName,\n              city: city,\n              phone: phone,\n              email: email\n            });\n            console.log(userInfo);\n\n          case 2:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function signin(email, password) {\n    return fire.auth().signInWithEmailAndPassword(email, password).catch(function (err) {\n      switch (err.code) {\n        case \"auth/invalid-email\":\n        case \"auth/user-disabled\":\n        case \"auth/user-not-found\":\n          alert(\"wrong Email\");\n          console.log(err.message);\n          break;\n\n        case \"auth/wrong-password\":\n          alert(\"wrong Password\");\n          console.log(err.message);\n          break;\n      }\n    });\n  }\n\n  function Logout() {\n    fire.auth().signOut();\n  }\n\n  useEffect(function () {\n    var unsubscribe = fire.auth().onAuthStateChanged(function (user) {\n      setCurrentUser(user);\n      console.log(user);\n    });\n    return unsubscribe;\n  }, []);\n  var value = {\n    currentUser: currentUser,\n    userInfo: userInfo,\n    setUserInfo: setUserInfo,\n    name: name,\n    email: email,\n    password: password,\n    userID: userID,\n    signup: signup,\n    signin: signin,\n    updateEmail: updateEmail,\n    updatePassword: updatePassword,\n    onLogin: onLogin\n  };\n  return React.createElement(UserContext.Provider, {\n    value: value,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }\n  }, children);\n}","map":{"version":3,"sources":["C:/Users/asafs/Desktop/homeals/src/UserContext.js"],"names":["fire","auth","React","useContext","useState","useEffect","dbFirestore","UserContext","createContext","UserUpdateContext","useUserContext","useUserUpdateContext","UserProvider","children","currentUser","setCurrentUser","id","firstName","lastName","city","phone","email","userInfo","setUserInfo","value","error","name","setName","setEmail","password","setPassword","userID","setUserID","onLogin","updateEmail","updatePassword","signup","flag","createUserWithEmailAndPassword","catch","err","code","alert","message","setDbUser","uid","console","log","signin","signInWithEmailAndPassword","Logout","signOut","unsubscribe","onAuthStateChanged","user"],"mappings":"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","sourcesContent":["import fire from '../fire'\r\nimport { auth } from 'firebase'\r\nimport React, { useContext, useState, useEffect } from 'react'\r\nimport dbFirestore from '../fire'\r\n\r\nconst UserContext = React.createContext()\r\nconst UserUpdateContext = React.createContext()\r\n\r\nexport function useUserContext() {\r\n    return useContext(UserContext)\r\n}\r\n\r\nexport function useUserUpdateContext() {\r\n    return useContext(UserUpdateContext)\r\n}\r\n\r\nexport function UserProvider({ children }) {\r\n    const [currentUser, setCurrentUser] = useState()\r\n    const [userInfo, setUserInfo] = ({ id: '', firstName: '', lastName: '', city: '', phone: '', email: '' })\r\n    const [name, setName] = useState({ value: '', error: '' })\r\n    const [email, setEmail] = useState({ value: '', error: '' })\r\n    const [password, setPassword] = useState({ value: '', error: '' })\r\n    const [userID, setUserID] = useState('')\r\n\r\n    function onLogin(email, userID) {\r\n        setEmail(email);\r\n        setUserID(userID);\r\n    }\r\n\r\n    function updateEmail(email) {\r\n        return currentUser.updateEmail(email)\r\n    }\r\n\r\n    function updatePassword(password) {\r\n        return currentUser.updatePassword(password)\r\n    }\r\n\r\n    async function signup(firstName,lastName,city,phone,email,password){\r\n        var flag = true;\r\n        await fire\r\n            .auth()\r\n            .createUserWithEmailAndPassword(email, password)\r\n            .catch(err => {\r\n                switch (err.code) {\r\n                    case \"auth/email-already-in-use\":\r\n                    case \"auth/invalid-email\":\r\n                    case \"auth/weak-password\":\r\n                        alert(err.message);\r\n                        flag = false;\r\n                        break;\r\n                }\r\n            });\r\n        if (flag) {\r\n             setDbUser(currentUser.uid, firstName,lastName,city,phone,currentUser.email)  \r\n        }\r\n\r\n        return flag;\r\n    }\r\n\r\n    async function setDbUser(uid,firstName,lastName,city,phone,email)   {\r\n        setUserInfo({uid, firstName,lastName,city,phone,email})\r\n        console.log(userInfo)\r\n    \r\n        /* console.log()\r\n        const users = await dbFirestore\r\n             .firestore()\r\n            .collection('userData')\r\n            .doc(currentUser.uid)\r\n            .set({\r\n             \r\n                email: currentUser.email,\r\n            })\r\n            .then(() => {\r\n                console.log('User added!');\r\n            });  */\r\n\r\n    }\r\n\r\n\r\n    function signin(email, password) {\r\n        return fire\r\n            .auth()\r\n            .signInWithEmailAndPassword(email, password)\r\n            .catch(err => {\r\n                switch (err.code) {\r\n                    case \"auth/invalid-email\":\r\n                    case \"auth/user-disabled\":\r\n                    case \"auth/user-not-found\":\r\n                        alert(\"wrong Email\");\r\n                        console.log(err.message)\r\n                        break;\r\n                    case \"auth/wrong-password\":\r\n                        alert(\"wrong Password\");\r\n                        console.log(err.message)\r\n                        break;\r\n                }\r\n            });\r\n    }\r\n\r\n    function Logout() {\r\n        fire.auth().signOut();\r\n    }\r\n\r\n    useEffect(() => {\r\n        const unsubscribe = fire.auth().onAuthStateChanged(user => {\r\n            setCurrentUser(user)\r\n\r\n            console.log(user)\r\n        })\r\n\r\n        return unsubscribe\r\n    }, [])\r\n\r\n    const value = {\r\n        currentUser,\r\n        userInfo,\r\n        setUserInfo,\r\n        name,\r\n        email,\r\n        password,\r\n        userID,\r\n        signup,\r\n        signin,\r\n        updateEmail,\r\n        updatePassword,\r\n        onLogin\r\n    }\r\n\r\n    return (\r\n        <UserContext.Provider value={value}>\r\n            {children}\r\n        </UserContext.Provider>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}